<!--create.ejs-->
<form action="/programme/create" method="post">

    <div class="field">
        <label class="label">Faculty Name</label>
        <div class="control">
            <input class="input" type="text" name="facultyname" required>
        </div>
    </div>

    <div class="field">
        <label class="label">Prgramme Name</label>
        <div class="control">
            <input class="input" type="text" name="programmename" required>
        </div>
    </div>

    <div class="field">
        <label class="label">Enrollment</label>
        <div class="control">
            <input class="input" type="number" name="enrollment" required>
        </div>
    </div>
    
    <div class="field">
        <label class="label">Image Url</label>
        <div class="control">
            <input class="input" type="string" name="imageurl" style="font-weight: bold;" required>
        </div>
    </div>
    <div class="field">
        <div class="control">
            <button class="button is-link" type="submit">Submit</button>
        </div>
    </div>


    <script>
        async function createForm(oFormElement) {

            var response = await fetch("/create/", {
                method: "POST",
                credentials: 'same-origin',
                headers: { 'content-type': 'application/x-www-form-urlencoded' },
                //enctype code of form
                //put into array            
                //map into input and encode                                                        
                 //join it
                body: Array.from(oFormElement).map(input => encodeURIComponent(input.name) + '=' + encodeURIComponent(input.value)).join('&'),
            });

            if (response.ok) {
                var data = await response.json();   // for res.ok() or res.json()
                alert(data.message);
                windows.location = data.url;
                //location.reload(true);
            } else if (response.status == 401) {
                var data = await response.text();   // for res.send()
                alert(data);
            } else {
                alert(response.statusText);
            }

        };
    </script>

</form>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.0/css/bulma.min.css">