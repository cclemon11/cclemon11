

<div class="container">
    <div class="columns">
        <div class="column">
            <div class="column">
                <div class=content is-medium>
                    <ul>
                        <td><a href="<%= programme.programmewebsite %>">
                        <img style="object-fit:cover" src="<%= programme.imageurl %>" />
                        </a> </td>

                        <li><b>
                        <%= programme.programmename %></b> 
                         </li>
                        <li><b>Faculty Name:  </b>
                        <%= programme.facultyname %>
                          </li>

                         <li><b>Enrollment:</b> <%= programme.enrollment %> 
                         </li>
                         
                         <li><b>Programme Objectives:</b> <%= programme.programmeobjectives %> 
                         </li>

                         <li><b>Credits required for graduation:</b> <%= programme.credits %> 
                         </li>

                         <li><b>Duration of Study:</b> <%= programme.duration %> 
                         </li>

                         <% if((req.session.role == "admin" ) || (req.session.role == "facultymember" ) 
                         || (req.session.role == "executivemanger" )){ %>
                         <td><a href="http://localhost:1337/programme/evaluation/<%= programme.id %>">
                            Evaluation
                        </a> </td>
                        <% } %>
                    <td>
                    </ul>
                </div>
            </div>


<!-- <form action="/programme/delete/<%= programme.id %>" method="POST"> -->
    <% if(req.session.role == "admin"){ %>
        <button type="button" class="button is-danger" onclick="deleteProgramme('<%= programme.id %>')">Delete</button>
            <!-- </form> -->
     <% } %>
            <script>
                async function deleteProgramme(id) {
                    var r = confirm("Confirm Delete?");
    
                    if (r) {
                        var response = await fetch("/programme/" + id, {
                            method: "DELETE",
                        });
    
                        if (response.ok) {
                            // var html = await response.text();
                            //alert(html);
                            alert("Programme deleted.");
                            location.assign("/");
    
                        } else {
                            alert(response.status + ": " + response.statusText);
                        }
    
                    } else {
                        alert("cancelled");
                    }
                };
            </script>
    

